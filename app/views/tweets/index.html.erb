<%= stylesheet_link_tag 'index', :media => "all" %>

<h1>自分の題名</h1>

<%= link_to "今日の気分を診断する", new_perfume_path, class: "btn btn-primary" %>

<%= link_to "新規投稿へ", new_tweet_path %>

<% if user_signed_in? %>
  <%= link_to "マイページへ", user_path(current_user.id) %>
<% end %>

<h2>🌱 今日のおすすめタスク</h2>

<% if @recommended_tweets.any? %>
  <% @recommended_tweets.each do |tweet| %>
    <p><%= tweet.title %></p>
  <% end %>
<% else %>
  <p>診断結果がまだありません</p>
<% end %>

<div class="tweets-container">
<h3>🌟タスク一覧🌟</h3>
  <% @tweets.each do |t| %>
    <div class="tweet">
      <div class="main-box">
        <div class="left-container">
          <p><strong>投稿者:</strong> <%= t.user&.email || "未設定" %></p>
          <%= image_tag t.image_url, size: "250x200" if t.image? %>
          <p><strong>タスク名:</strong> <%= t.title.presence || "なし" %></p>
          <p><strong>メモ:</strong> <%= t.memo.presence || "なし" %></p>        
        </div>

        <div class="right-container">
          <%= link_to "詳細へ", tweet_path(t.id) %>
          <%= link_to "編集する", edit_tweet_path(t.id) %>
          <%= button_to "削除する", tweet_path(t.id), method: :delete %>
        </div>

        <p><strong>作成日時:</strong> <%= t.created_at %></p>
      </div>
    </div>

  <% end %>
</div>

<%= form_tag({controller:"tweets",action:"index"}, method: :get) do %>
    <% Tag.all.each do |t| %>
        <li><%= check_box :tag_ids, t.name %><%= t.name %></li>
    <% end %>
    <%= submit_tag '検索' %>
<% end %>

<%= form_tag({controller:"tweets",action:"index"}, method: :get) do %>
    <%= text_field_tag :tag %>
    <%= submit_tag 'タグを追加' %>
<% end %>